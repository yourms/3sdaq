<!DOCTYPE html>
{% load static %}
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>주식매매-매도화면</title>
        <link href="https://cdn.jsdelivr.net/npm/simple-datatables@latest/dist/style.css" rel="stylesheet" />
        <link href="{% static 'css/styles.css'%}" rel="stylesheet" />
        <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/js/all.min.js" crossorigin="anonymous"></script>
		 <meta charset="UTF-8">
    <title>sTrade_list</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<style>
		#contents{
			width: 100%;
 			text-align: center;
		}
		#first {
			display:inline-block;
			width:650px;
			height:620px;
			float: left;
			position: relative;
			left: 15%;
			overflow-y: auto;
		}
		#second {
			display:inline-block;
			width: 300px;
			float: left;
			position: relative;
			left: 15%;
		}
		#three {

			display:inline-block;
			width:1500px;
			height:620px;
			overflow-y: auto;

		}
		table {

		  border-collapse: collapse;
		  overflow-y: auto;
		  align:center;
		}
		th{height:30px;}
		td{height:20px;}

		th{background-color: #f2f2f2;}
		tr:nth-child(even) {background-color: #f2f2f2;}
		input{height:60%;}

</style>
    </head>
    <script src="{% static '/resources/plugins/jQuery/jQuery-2.1.4.min.js' %}"></script>
    <body class="sb-nav-fixed">
        <nav class="sb-topnav navbar navbar-expand navbar-dark bg-dark">
            <!-- Navbar Brand-->
            <a class="navbar-brand ps-3" href="index.html">Start Bootstrap</a>
            <!-- Sidebar Toggle-->
            <button class="btn btn-link btn-sm order-1 order-lg-0 me-4 me-lg-0" id="sidebarToggle" href="#!"><i class="fas fa-bars"></i></button>
            <!-- Navbar Search-->
            <form class="d-none d-md-inline-block form-inline ms-auto me-0 me-md-3 my-2 my-md-0">
                <div class="input-group">
                    <input class="form-control" type="text" placeholder="Search for..." aria-label="Search for..." aria-describedby="btnNavbarSearch" />
                    <button class="btn btn-primary" id="btnNavbarSearch" type="button"><i class="fas fa-search"></i></button>
                </div>
            </form>
            <!-- Navbar-->
            <ul class="navbar-nav ms-auto ms-md-0 me-3 me-lg-4">
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" id="navbarDropdown" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false"><i class="fas fa-user fa-fw"></i></a>
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
                        <li><a class="dropdown-item" href="#!">Settings</a></li>
                        <li><a class="dropdown-item" href="#!">Activity Log</a></li>
                        <li><hr class="dropdown-divider" /></li>
                        <li><a class="dropdown-item" href="#!">Logout</a></li>
                    </ul>
                </li>
            </ul>
        </nav>
        <div id="layoutSidenav">
            <div id="layoutSidenav_nav">
                <nav class="sb-sidenav accordion sb-sidenav-dark" id="sidenavAccordion">
                    <div class="sb-sidenav-menu">
                        <div class="nav">
                            <div class="sb-sidenav-menu-heading">Core</div>
                            <a class="nav-link" href="index.html">
                                <div class="sb-nav-link-icon"><i class="fas fa-tachometer-alt"></i></div>
                                Dashboard
                            </a>
                            <div class="sb-sidenav-menu-heading">Interface</div>
                            <a class="nav-link collapsed" href="#" data-bs-toggle="collapse" data-bs-target="#collapseLayouts" aria-expanded="false" aria-controls="collapseLayouts">
                                <div class="sb-nav-link-icon"><i class="fas fa-columns"></i></div>
                                Layouts
                                <div class="sb-sidenav-collapse-arrow"><i class="fas fa-angle-down"></i></div>
                            </a>
                            <div class="collapse" id="collapseLayouts" aria-labelledby="headingOne" data-bs-parent="#sidenavAccordion">
                                <nav class="sb-sidenav-menu-nested nav">
                                    <a class="nav-link" href="layout-static.html">Static Navigation</a>
                                    <a class="nav-link" href="layout-sidenav-light.html">Light Sidenav</a>
                                </nav>
                            </div>
                            <a class="nav-link collapsed" href="#" data-bs-toggle="collapse" data-bs-target="#collapsePages" aria-expanded="false" aria-controls="collapsePages">
                                <div class="sb-nav-link-icon"><i class="fas fa-book-open"></i></div>
                                Pages
                                <div class="sb-sidenav-collapse-arrow"><i class="fas fa-angle-down"></i></div>
                            </a>
                            <div class="collapse" id="collapsePages" aria-labelledby="headingTwo" data-bs-parent="#sidenavAccordion">
                                <nav class="sb-sidenav-menu-nested nav accordion" id="sidenavAccordionPages">
                                    <a class="nav-link collapsed" href="#" data-bs-toggle="collapse" data-bs-target="#pagesCollapseAuth" aria-expanded="false" aria-controls="pagesCollapseAuth">
                                        Authentication
                                        <div class="sb-sidenav-collapse-arrow"><i class="fas fa-angle-down"></i></div>
                                    </a>
                                    <div class="collapse" id="pagesCollapseAuth" aria-labelledby="headingOne" data-bs-parent="#sidenavAccordionPages">
                                        <nav class="sb-sidenav-menu-nested nav">
                                            <a class="nav-link" href="login.html">Login</a>
                                            <a class="nav-link" href="register.html">Register</a>
                                            <a class="nav-link" href="password.html">Forgot Password</a>
                                        </nav>
                                    </div>
                                    <a class="nav-link collapsed" href="#" data-bs-toggle="collapse" data-bs-target="#pagesCollapseError" aria-expanded="false" aria-controls="pagesCollapseError">
                                        Error
                                        <div class="sb-sidenav-collapse-arrow"><i class="fas fa-angle-down"></i></div>
                                    </a>
                                    <div class="collapse" id="pagesCollapseError" aria-labelledby="headingOne" data-bs-parent="#sidenavAccordionPages">
                                        <nav class="sb-sidenav-menu-nested nav">
                                            <a class="nav-link" href="401.html">401 Page</a>
                                            <a class="nav-link" href="404.html">404 Page</a>
                                            <a class="nav-link" href="500.html">500 Page</a>
                                        </nav>
                                    </div>
                                </nav>
                            </div>
                            <div class="sb-sidenav-menu-heading">Addons</div>
                            <a class="nav-link" href="charts">
                                <div class="sb-nav-link-icon"><i class="fas fa-chart-area"></i></div>
                                Charts
                            </a>
                            <a class="nav-link" href="tables.html">
                                <div class="sb-nav-link-icon"><i class="fas fa-table"></i></div>
                                Tables
                            </a>
                        </div>
                    </div>
                    <div class="sb-sidenav-footer">
                        <div class="small">Logged in as:</div>
                        Start Bootstrap
                    </div>
                </nav>
            </div>
            <div id="layoutSidenav_content">
                <main>
                    <div class="container-fluid px-4">
                        <h1 class="mt-4">주식매매</h1>
                        <ol class="breadcrumb mb-4">
                            <li class="breadcrumb-item active">Dashboard</li>
                        </ol>
                        <div class="row">
                            <div class="col-xl-3 col-md-6">
                                <div class="card bg-primary text-white mb-4">
                                    <div class="card-body" >주식매매 </div>
<!-- 버튼에 링크 걸기 -->
                                    <a class="nav-link" href = "/trade/sTrade_list/"></a>
                                    <div class="card-footer d-flex align-items-center justify-content-between"></div>
                                </div>
                            </div>
                            <div class="col-xl-3 col-md-6">
                                <div class="card bg-warning text-white mb-4">
                                    <div class="card-body">차트분석</div>
                                    <a class="nav-link" href = "/trade/sTrade_chart/"></a>
                                    <div class="card-footer d-flex align-items-center justify-content-between">

                                    </div>
                                </div>
                            </div>
                            <div class="col-xl-3 col-md-6">
                                <div class="card bg-success text-white mb-4">
                                    <div class="card-body">내계좌</div>
                                    <a class="nav-link" href = "/trade/sTrade_list/"></a>
                                    <div class="card-footer d-flex align-items-center justify-content-between">

                                    </div>
                                </div>
                            </div>
                            <div class="col-xl-3 col-md-6">
                                <div class="card bg-danger text-white mb-4">
                                    <div class="card-body">--공란--</div>
                                    <a class="nav-link" href = "/trade/sTrade_list/"></a>
                                    <div class="card-footer d-flex align-items-center justify-content-between">

                                    </div>
                                </div>
                            </div>
                        </div>
<!--여기서부터 내용-->
<div id="contents">
	<div id="first" style="margin-top: 30px;height: 500px;" >
		<div style="width:630px;">
		<table class="" style="width:100%;">
			<caption  style = "display:none;">이건테이블이다.</caption>
			<colgroup>
				<col width="30%" />
				<col width="20%" />
				<col width="20%" />
				<col width="20%" />
				<col width="20%" />
			</colgroup>
			<thead>
				<tr>
					<th>종목</th><th>현재가</th><th>전일가</th><th>전일대비</th><th>변동율</th>
				</tr>
			</thead>

			<tbody id="tbody" stype="height:300px; width:100%;">
				{% for sTrade in sTrades %}
				<tr id="now_sTrade_{{forloop.counter0}}" copyId="now_sTrade_{{forloop.counter0}}" trCode="{{sTrade.code}}" onclick="detail_order_click(this);" style='text-align: center;'>
					<td name="name" id="td_sTrade_name_{{forloop.counter0}}">{{sTrade.name}}</td>
					<td name="price" id="td_sTrade_price_{{forloop.counter0}}">{{sTrade.price}}</td>
					<td name="d_1price" id="td_sTrade_d_1price_{{forloop.counter0}}">{{sTrade.d_1price}}</td>
					<td name="change" id="td_sTrade_change_{{forloop.counter0}}">{{sTrade.change}}</td>
					<td name="ch_rate" id="td_sTrade_ch_rate_{{forloop.counter0}}">{{sTrade.ch_rate}}</td>
				</tr>
				{% endfor %}
			</tbody>

		</table>
		</div>
	</div>
	<div id="second" style="margin-top: 30px;">
		<table class="table table-bordered" style='text-align: center;position: absolute;left: 50px;' align="center">
			<thead>
				<tr>
					<th id="sTrade_Form_th1" style="">매수</th><th id="sTrade_Form_th2">매도</th>
				</tr>
			</thead>
			<tbody id="tbody2">
				<tr>
					<td width="100" >종목</td>
					<td width="100" id="sTrade_Form_dname"></td>
				</tr>
				<tr>
					<td width="100" >현재가</td>
					<td width="100" id="sTrade_Form_dprice"></td>
				</tr>
				<tr>
					<td width="100" id="sTrade_Form_wprice_txt" >매수가</td>
					<td width="100"><input type="text" id="sTrade_Form_wprice" style="text-align: center;" /></td>
				</tr>
				<tr>
					<td width="100" >수량</td>
					<td width="100">
						<input type="text" id="sTrade_Form_dquan" style="text-align: center;" />
					</td>
				</tr>
				<tr>
					<td width="100" colspan='2'><button id="bsBtn" type="button" onclick="">매수</button>
						<input type="text" id="sTrade_Form_dcode" value="" style="visibility:hidden;width: 0px;">
						<input type="text" id="sTrade_Form_gubun" value="" style="visibility:hidden;width: 0px;">
					</td>
				</tr>
			</tbody>
		</table>
	</div>
	<div id="three" style="margin-top: 50px;">
		<table class="table table-bordered" stype="height:300px; width:100%;" align="center">
			<colgroup>
				<col width="18%" />
				<col width="11%" />
				<col width="11%" />
				<col width="12%" />
				<col width="11%" />
				<col width="12%" />
				<col width="11%" />
				<col width="14%" />
			</colgroup>
			<thead>
				<tr>
					<th style="width: 10px">종목</th><th>전일가</th><th>현재가</th><th>전일대비</th><th>수익률</th><th>매입가</th><th>수량</th><th>총금액</th>
				</tr>
			</thead>
			<tbody id="tbody3">
				{% for myTrade in myTrades %}
				<tr id="now_myTrade_{{forloop.counter0}}" copyId="now_myTrade_{{forloop.counter0}}" trCode="{{myTrade.code}}"
					dcode="{{myTrade.code}}" dname="{{myTrade.name}}" dprice="{{myTrade.price}}" dquan="{{myTrade.quan}}"
					vgubun='S'  onclick="trade_preOrder(this)" style='text-align: center;'>
					<td width="100" name="name" id="td_myTrade_name_{{forloop.counter0}}">{{myTrade.name}}</td>
					<td width="100" name="d_1price" id="td_myTrade_d_1price_{{forloop.counter0}}">{{myTrade.d_1price}}</td>
					<td width="100" name="price" id="td_myTrade_price_{{forloop.counter0}}">{{myTrade.price}}</td>
					<td width="100" name="change" id="td_myTrade_change_{{forloop.counter0}}">{{myTrade.change}}</td>
					<td width="100" name="income_rate" id="td_myTrade_income_rate_{{forloop.counter0}}">{{myTrade.income_rate}}</td>
					<td width="100" name="myprice" id="td_myTrade_myprice_{{forloop.counter0}}">{{myTrade.myprice}}</td>
					<td width="100" name="quan" id="td_myTrade_quan_{{forloop.counter0}}">{{myTrade.quan}}</td>
					<td width="100" name="t_price" id="td_myTrade_t_price_{{forloop.counter0}}">{{myTrade.t_price}}</td>
				</tr>
				{% endfor %}
			</tbody>
		</table>
	</div>
	</div>

<script>
function detail_order_click(e){
	caller_Id = $(e).attr('copyId');
	ch_copyId = $('#detail_order > tbody > tr').attr('copyId');
	if(caller_Id ==  ch_copyId){
		$('#now_detail').remove();
	}else{
		detail_order(e);
	}
}
function detail_order(e){
	//console.log( $(e).attr('trCode'));
	caller_Id = $(e).attr('copyId');
	//console.log( "caller_Id : " + caller_Id);
	$.ajax({
		url : '../detail_order/',
		type : 'POST',
		data : {'csrfmiddlewaretoken' : '{{csrf_token}}',
				code : $(e).attr('trCode')},

		dataType : 'json',
		success : function(obj){
			//console.log( "#^^#");
			$('#now_detail').remove();
			var count = false
			var txt = "";
			txt += "<tr id='now_detail'>"
			txt += "<td colspan='5'>"
			txt += "<table id='detail_order' class='table table-bordered' width='450px' align='center'>"
			txt += "<thead>"
			txt += "<tr>"
			txt += "<th></th><th>호가</th><th>수량</th>"
			txt += "</tr>"
			txt += "</thead>"
			txt += "<tbody>"
			$.each(obj, function(idx, data){
				count = true;
				txt += "<tr copyId="+caller_Id+" trgubun="+data.gubun+" trCode="+data.code+ " dcode="+data.code+ " dname="+data.name+" dprice="+data.price+" dquan="+data.quan+" vgubun='B' onclick=trade_preOrder(this)>"
				txt += "<td width='100px' style='text-align: center;'>"+data.name+"</td>"
				txt += "<td width='100px' style='text-align: center;'>"+getComma(data.price)+"</td>"
				txt += "<td width='100px' style='text-align: center;'>"+getComma(data.quan)+"</td>"
				txt += "</tr>"
			});
			txt += "</tbody>"
			txt += "</table>"
			txt += "</td>"
			txt += "</tr>"
			if(count == true){
				$('#'+caller_Id).after(txt);
				$('#detail_order > tbody > tr[trgubun="S"]').css("background-color","#A8C8F9");
				$('#detail_order > tbody > tr[trgubun="B"]').css("background-color","#FC9EBD");
			}

		},
		error:function(request, error){
			alert("fail");
		}
	});
}
function trade_preOrder(obj){
	var gubun = $(obj).attr('vgubun');
	var dcode = $(obj).attr('dcode');
	var dname = $(obj).attr('dname');
	var dprice = getComma($(obj).attr('dprice'));
	var dquan = getComma($(obj).attr('dquan'));
	//console.log("dquan : " + dquan);
	var price = $("#tbody > tr[trCode = "+dcode+"] > td[name='price']").text();
	$('#sTrade_Form_dname').text(dname);
	$('#sTrade_Form_dprice').text(price);
	$('#sTrade_Form_wprice').val(dprice);
	$('#sTrade_Form_dquan').val(dquan);
	$('#sTrade_Form_dcode').val(dcode);
	$('#sTrade_Form_gubun').val(gubun);
	if(gubun == "B"){
		sTradeFormChange1();
	}else{
		sTradeFormChange2();
	}


}
function updatesTrade(){
	$.ajax({
		url: '../sTrade_list/',
		type : 'POST',
		data : {'csrfmiddlewaretoken' : '{{csrf_token}}',
				typeST : 'update'},
		dataType : 'json',
		success: function(obj){
			//console.log(obj);
			//console.log(obj['sTrades']);
			$.each(obj['sTrades'], function(idx, data){
				var before_price = clearFormatNum($('#td_sTrade_price_'+idx).text());
				if(before_price < clearFormatNum(data.price)){       // 변경된 데이터의 색 반짝거림
					var hexColor = rgb2hex($('#now_sTrade_'+idx).css("background-color"));
					if(hexColor == "#000000") hexColor = "#FFFFFF";
					$('#now_sTrade_'+idx).css("background-color","#FC9EBD");
					setTimeout(function() {
						$('#now_sTrade_'+idx).css("background-color",hexColor);
					}, 500);
				}
				if(before_price > clearFormatNum(data.price)){       // 변경된 데이터의 색 반짝거림
					var hexColor = rgb2hex($('#now_sTrade_'+idx).css("background-color"));
					if(hexColor == "#000000") hexColor = "#FFFFFF";
					$('#now_sTrade_'+idx).css("background-color","#A8C8F9");
					setTimeout(function() {
						$('#now_sTrade_'+idx).css("background-color",hexColor);
					}, 500);

				}
				if(clearFormatNum(data.price) > clearFormatNum(data.d_1price)){
					$('#td_sTrade_change_'+idx).css("color", "#db0d36"); // 전일대비 높으면 빨간색
				}else if(clearFormatNum(data.price) < clearFormatNum(data.d_1price)){
					$('#td_sTrade_change_'+idx).css("color", "#0100FF"); // 전일대비 높으면 파란색
				}else{
					$('#td_sTrade_change_'+idx).css("color", "#000000"); // 전일대비 0이면 검정색
				}
				$('#td_sTrade_name_'+idx).text(data.name);
				$('#td_sTrade_price_'+idx).text(getComma(data.price));
				$('#td_sTrade_d_1price_'+idx).text(getComma(data.d_1price));
				$('#td_sTrade_change_'+idx).text(getComma(data.change));
				$('#td_sTrade_ch_rate_'+idx).text(data.ch_rate);


			});
			$.each(obj['myTrades'], function(idx, data){
			    var tr_code = $('#now_myTrade_'+idx).attr('dcode');
			    var tr_name = $('#now_myTrade_'+idx).attr('dname');

			    if(data.code != tr_code){
					refreshMemList();
			    }
			    var before_price = clearFormatNum($('#td_myTrade_price_'+idx).text());
				if(before_price < clearFormatNum(data.price)){       // 변경된 데이터의 색 반짝거림
					var hexColor = rgb2hex($('#now_myTrade_'+idx).css("background-color"));
					if(hexColor == "#000000") hexColor = "#FFFFFF";
					$('#now_myTrade_'+idx).css("background-color","#FC9EBD");
					setTimeout(function() {
						$('#now_myTrade_'+idx).css("background-color",hexColor);
					}, 500);
				}
				if(before_price > clearFormatNum(data.price)){       // 변경된 데이터의 색 반짝거림
					var hexColor = rgb2hex($('#now_myTrade_'+idx).css("background-color"));
					if(hexColor == "#000000") hexColor = "#FFFFFF";
					$('#now_myTrade_'+idx).css("background-color","#A8C8F9");
					setTimeout(function() {
						$('#now_myTrade_'+idx).css("background-color",hexColor);
					}, 500);
				}
				if(clearFormatNum(data.price) > clearFormatNum(data.myprice)){
					$('#td_myTrade_income_rate_'+idx).css("color", "#db0d36"); // 수익률이 높으면 빨간색
				}else if(clearFormatNum(data.price) < clearFormatNum(data.myprice)){
					$('#td_myTrade_income_rate_'+idx).css("color", "#0100FF"); // 수익률이 높으면 파란색
				}else{
					$('#td_myTrade_income_rate_'+idx).css("color", "#000000"); // 수익률이 0이면 검정색
				}


				$('#td_myTrade_name_'+idx).text(data.name);
				$('#td_myTrade_d_1price_'+idx).text(getComma(data.d_1price));
				$('#td_myTrade_price_'+idx).text(getComma(data.price));
				$('#td_myTrade_change_'+idx).text(getComma(data.change));
				$('#td_myTrade_income_rate_'+idx).text(data.income_rate);
				$('#td_myTrade_myprice_'+idx).text(getComma(data.myprice));
				$('#td_myTrade_quan_'+idx).text(getComma(data.quan));
				$('#td_myTrade_t_price_'+idx).text(getComma(data.t_price));
			});

		},
		error:function(request, error){
			alert("fail");
		}
	});
	timerID = setTimeout("updatesTrade()", 1000); // 5초 단위로 갱신 처리
}
function getComma(n) {
	n = clearFormatNum(n);
	var reg = /(^[+-]?\d+)(\d{3})/;
	n += '';
	while (reg.test(n))
		n = n.replace(reg, '$1' + ',' + '$2');
	return n;
}
function clearFormatNum(num) {
	if (num=="") return num;
	return String(num).replace(/,/gi, "")
}
function rgb2hex(rgb) {
   rgb = rgb.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);
 	return (rgb && rgb.length === 4) ? "#" +
  ("0" + parseInt(rgb[1],10).toString(16)).slice(-2) +
  ("0" + parseInt(rgb[2],10).toString(16)).slice(-2) +
  ("0" + parseInt(rgb[3],10).toString(16)).slice(-2) : '';
}
function ColorToHex(color) {
  var hexadecimal = color.toString(16);
  return hexadecimal.length == 1 ? "0" + hexadecimal : hexadecimal;
}

function ConvertRGBtoHex(red, green, blue) {
  return "#" + ColorToHex(red) + ColorToHex(green) + ColorToHex(blue);
}
function updatesDetail() {
	if ( $( "#now_detail" ).length ) {
		detail_order($('#detail_order > tbody > tr'));
	}
}
function formCheckNowPrice(){
	if ($("#sTrade_Form_dprice").text() != "" ) {

		var dcode = $("#sTrade_Form_dcode").val();
		var price = $("#tbody > tr[trCode = "+dcode+"] > td[name='price']").text();
		//price = $("#tbody > tr[trcode = '1'] > td[name='price']").text();
		$("#sTrade_Form_dprice").text(price);
	}
}
function sTrade_trade(){
	//console.log("sTrade_trade!!!!");
	var name = $('#sTrade_Form_dname').text();
	var price = clearFormatNum($('#sTrade_Form_wprice').val());
	var quan = clearFormatNum($('#sTrade_Form_dquan').val());
	var code = clearFormatNum($('#sTrade_Form_dcode').val());
	var gubun = $('#sTrade_Form_gubun').val();

	$.ajax({
		url: '../sTrade_trade/',
		type : 'POST',
		data : {'csrfmiddlewaretoken' : '{{csrf_token}}',
				name : name,
				price : price,
				quan : quan,
				code : code,
				gubun : gubun },
		dataType : 'json',
		success: function(obj){
			if(gubun == "B") alert("매수주문이 완료되었습니다.");
			if(gubun == "S") alert("매도주문이 완료되었습니다.");
			refreshMemList();
		},
		error:function(data){
           	alert(data.responseJSON.error); // the message
		}
	});
}
function refreshMemList(){
	location.reload();
}
function sTradeFormChange1(){
	$('#sTrade_Form_th1').css("background-color","#FC9EBD");
	$('#sTrade_Form_th2').css("background-color","#f2f2f2");
	$('#bsBtn').css("background-color","#FC9EBD");
	$('#bsBtn').text("매수");
	$('#sTrade_Form_wprice_txt').text("매수가");
	$('#sTrade_Form_gubun').val('B');
}
function sTradeFormChange2(){
	$('#sTrade_Form_th1').css("background-color","#f2f2f2");
	$('#sTrade_Form_th2').css("background-color","#A8C8F9");
	$('#bsBtn').css("background-color","#A8C8F9");
	$('#bsBtn').text("매도");
	$('#sTrade_Form_wprice_txt').text("매도가");
	$('#sTrade_Form_gubun').val('S');
}


</script>
<script>
$(document).ready(function(){
	updatesTrade();
	setInterval("updatesDetail()", 2000);
	setInterval("formCheckNowPrice()", 1000);
	$('#bsBtn').click(function(){
		/*window.alert('searchBtn click');*/
		sTrade_trade();
	});
	$('#sTrade_Form_th1').click(function(){
		sTradeFormChange1();
	});
	$('#sTrade_Form_th2').click(function(){
		sTradeFormChange2();
	});

	$('#sTrade_Form_wprice').on("change keyup", function() {
		$('#sTrade_Form_wprice').val(getComma($('#sTrade_Form_wprice').val()));
	});
<!--	$('#sTrade_Form_dquan').on("propertychange change keyup paste input", function() {-->
	$('#sTrade_Form_dquan').on("change keyup", function() {
		$('#sTrade_Form_dquan').val(getComma($('#sTrade_Form_dquan').val()));
	});

})
</script>
</body>
</html>